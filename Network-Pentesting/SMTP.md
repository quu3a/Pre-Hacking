*SMTP

- Simple Mail Transfer Protocol
- Used for sending and receiving emails
- SMTP is used by programs like POP3 or IMAP receving emails
- normally smpt server communicaiton will be  plaintext 


*scanning



# arp-scan -l

# nmap -p 25 192.168.0.111



-----------------------------------------------------------------------------------------

# SMTP Process

# SMTP Commands

# SMPT Enumeration


**SMTP PROCESS


Sending mail server									Recieving mail server
	smtp client											smtp server



**SMTP Commands


# VRFY(Verify)
 - Means validates users
# EXPN(Expand)
 - Tells the actual delivery address of aliases and maliing list 
# RCPT TO(Recipients), 
 - Defines the receipients of the message 

Other commands
- HELO, 	-->	Client sends to the server to initiate a conversation
- STARTTLS, -->	Starts the TLS session
- DATA,		--> transfer of message contains  
- RSET, 	--> it is  used to abort the connection
- MAIL, 	--> it is going to specify the mail address of the sender
- QUIT, 	--> it is going to close the connection
- HELP, 	--> it is going to ask help screen 
- AUTH  	--> it is used to authenticate client to the server 




**SMTP Enumeration


1. Using Telnet
# telnet 192.168.1.5 25
# VRFY root
(250, 251, 252 - user is valid)
# VRFY admin
550 - user is not valid


2. Using Netcat
# nc 192.168.1.5 25
# VRFY root



Open Metasploit-framework
-----------------------------
# msfconsole


3. Using smtp_version

 - To check smtp version

# use auxiliary/scanner/smtp/smtp_version
# set RHOSTS 192.168.1.104
# exploit



4. Using smtp_enum

 - All possible usernames

# use auxiliary/scanner/smtp/smtp_enum
# set RHOSTS 192.168.1.104
# exploit





incase if you want to enumerate os level user details  
--------------------------------------------------------
5. Using smtp-user-enum tool
# smtp-user-enum -M VRFY -D metasploitable.localdomain -u backup -t 192.168.1.5


6. To verify many users
# smtp-user-enum -M VRFY -U /usr/share/metasploit-framework/data/wordlists/unix_users.txt -t 192.168.1.5





*Email spoofing

SPF   - 	Sender Policy Framework
DKIM  - 	Domainkeys Identified Mail
DMARC - 	Domain Based Message Authentication, Reporting and Conformance




